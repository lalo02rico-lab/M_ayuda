<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Gesti√≥n de servicios - Mesa de Ayuda</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/admin.css">
    <link rel="stylesheet" href="/css/admin_gservicios.css">
    <link rel="stylesheet" href="/css/responsive.css">
</head>

<body>

<header class="app-header">
    <div class="header-container">
        <div class="logos">
            <img src="/img/logo_gobierno.png" alt="Gobierno del Estado de M√©xico">
        </div>
        <a href="/admin/menu" class="btn-back">‚Üê Volver</a>
        <a href="/logout" class="btn-logout">Cerrar sesi√≥n</a>
    </div>
</header>

<main class="admin-layout">

    <aside class="sidebar"></aside>

    <section class="content">
        <div class="gestion-servicios-container">

            <!-- ===== MEN√ö ===== -->
            <div class="servicios-menu">
                <a th:href="@{/admin/gestion-servicios(categoria='resguardos')}"
                   th:classappend="${categoria=='resguardos'}?'active':''">Resguardos</a>

                <a th:href="@{/admin/gestion-servicios(categoria='correos')}"
                   th:classappend="${categoria=='correos'}?'active':''">Correos</a>

                <a th:href="@{/admin/gestion-servicios(categoria='licencias')}"
                   th:classappend="${categoria=='licencias'}?'active':''">Licencias</a>

                <a th:href="@{/admin/gestion-servicios(categoria='extenciones')}"
                   th:classappend="${categoria=='extenciones'}?'active':''">Extenciones</a>

                <a th:href="@{/admin/gestion-servicios(categoria='inventarios')}"
                   th:classappend="${categoria=='inventarios'}?'active':''">Inventarios</a>
            </div>

            <div class="servicios-panel">

                <!-- ================= FILTROS / BUSCADOR ================= -->
                <div class="buscador">
                    <form method="get" th:action="@{/admin/gestion-servicios}" class="filtros-form">
                        <input type="hidden" name="categoria" th:value="${categoria}">

                        <!-- filtro solo resguardos -->
                        <select name="tipo" th:if="${categoria=='resguardos'}">
                            <option value="">Todos</option>
                            <option value="ESCRITORIO_BASICO"   th:selected="${tipo=='ESCRITORIO_BASICO'}">Escritorio b√°sico</option>
                            <option value="MOVIL_AVANZADO"      th:selected="${tipo=='MOVIL_AVANZADO'}">M√≥vil avanzado</option>
                            <option value="ESCRITORIO_AVANZADO" th:selected="${tipo=='ESCRITORIO_AVANZADO'}">Escritorio avanzado</option>
                            <option value="MOVIL_MEDIO"         th:selected="${tipo=='MOVIL_MEDIO'}">M√≥vil medio</option>
                            <option value="PORTATIL_DONADO"     th:selected="${tipo=='PORTATIL_DONADO'}">Port√°til donado</option>
                        </select>

                        <input type="text" name="q"
                               placeholder="Buscar por usuario, √°rea, correo, serie, modelo‚Ä¶"
                               th:value="${q}">
                        <button type="submit">Buscar</button>
                    </form>
                </div>

                <!-- ================= ACCIONES ================= -->
                <div class="acciones">
                    <button class="btn-agregar"
                            th:data-categoria="${categoria}"
                            onclick="abrirModalAgregar(this)">
                        ‚ûï Agregar
                    </button>

                    <a th:href="@{/admin/descargar-pdf(
                               categoria=${categoria},
                               tipo=${tipo},
                               q=${q}
                              )}"
                       class="btn-descargar">
                        Descargar PDF
                    </a>
                </div>

                <!-- ================= TABLAS ================= -->
                <div class="resultado-box">

                    <!-- ================= RESGUARDOS ================= -->
                    <table th:if="${categoria=='resguardos'}">
                        <thead>
                        <tr>
                            <th>No</th>
                            <th>Tipo</th>
                            <th>Usuario</th>
                            <th>Usuario final</th>
                            <th>Direcci√≥n</th>
                            <th>√Årea</th>
                            <th>Perfil</th>
                            <th>Modelo</th>
                            <th>Serie CPU</th>
                            <th>Status</th>
                            <th>Acciones</th> <!-- üëà NUEVA COLUMNA -->
                        </tr>
                        </thead>

                        <tbody>
                        <tr th:each="r : ${resguardos}">
                            <td th:text="${r.no}"></td>
                            <td th:text="${r.tipoEquipo}"></td>
                            <td th:text="${r.usuario}"></td>
                            <td th:text="${r.usuarioFinal}"></td>
                            <td th:text="${r.direccion}"></td>
                            <td th:text="${r.area}"></td>
                            <td th:text="${r.perfilEquipo}"></td>
                            <td th:text="${r.modelo}"></td>
                            <td th:text="${r.serieCpu}"></td>
                            <td th:text="${r.status}"></td>

                            <!-- üëá BOTONES -->
                            <td>
                                <!-- EDITAR -->
                                <button
                                        th:data-id="${r.id}"
                                        th:data-tipo="${r.tipoEquipo}"
                                        th:data-usuario="${r.usuario}"
                                        th:data-usuariofinal="${r.usuarioFinal}"
                                        th:data-area="${r.area}"
                                        th:data-status="${r.status}"
                                        th:data-obs="${r.observaciones}"
                                        onclick="abrirModalResguardo(this)">
                                    ‚úèÔ∏è
                                </button>

                                <!-- LIBERAR -->
                                <button
                                        th:data-id="${r.id}"
                                        th:data-tipo="${r.tipoEquipo}"
                                        onclick="liberarResguardo(this)">
                                    üîì
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>


                    <!-- ================= CORREOS ================= -->
                    <table th:if="${categoria=='correos'}">
                        <thead>
                        <tr>
                            <th>Usuario</th><th>Correo</th><th>Licencia</th><th>√Årea</th><th>Acciones</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="c : ${correos}">
                            <td th:text="${c.usuario}"></td>
                            <td th:text="${c.correo}"></td>
                            <td th:text="${c.tipoLicencia}"></td>
                            <td th:text="${c.area}"></td>
                            <td>
                                <button th:data-id="${c.id}" data-categoria="correos"
                                        onclick="abrirModalEditar(this)">‚úèÔ∏è</button>
                                <button th:data-id="${c.id}" data-categoria="correos"
                                        onclick="eliminarRegistro(this)">üóëÔ∏è</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                    <!-- ================= LICENCIAS ================= -->
                    <table th:if="${categoria=='licencias'}">
                        <thead>
                        <tr>
                            <th>Usuario</th><th>√Årea</th><th>Total</th><th>Acciones</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="l : ${licencias}">
                            <td th:text="${l.usuario}"></td>
                            <td th:text="${l.area}"></td>
                            <td th:text="${l.totalLicencias}"></td>
                            <td>
                                <button th:data-id="${l.id}" data-categoria="licencias"
                                        onclick="abrirModalEditar(this)">‚úèÔ∏è</button>
                                <button th:data-id="${l.id}" data-categoria="licencias"
                                        onclick="eliminarRegistro(this)">üóëÔ∏è</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                    <!-- ================= EXTENCIONES ================= -->
                    <table th:if="${categoria=='extenciones'}">
                        <thead>
                        <tr>
                            <th>Ext</th><th>Nombre</th><th>Departamento</th><th>Correo</th><th>Acciones</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="e : ${extenciones}">
                            <td th:text="${e.id}"></td>
                            <td th:text="${e.nombre}"></td>
                            <td th:text="${e.departamento}"></td>
                            <td th:text="${e.correo}"></td>
                            <td>
                                <button th:data-id="${e.id}" data-categoria="extenciones"
                                        onclick="abrirModalEditar(this)">‚úèÔ∏è</button>
                                <button th:data-id="${e.id}" data-categoria="extenciones"
                                        onclick="eliminarRegistro(this)">üóëÔ∏è</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                    <!-- ================= INVENTARIOS ================= -->
                    <table th:if="${categoria=='inventarios'}">
                        <thead>
                        <tr>
                            <th>Inventario</th><th>NIC</th><th>Descripci√≥n</th><th>Valor</th>
                            <th>Marca</th><th>Modelo</th><th>Serie</th>
                            <th>Clave dependencia</th><th>Dependencia</th>
                            <th>Resguardatario</th><th>Inmueble</th><th>Proveedor</th>
                            <th>Estado de uso</th><th>Fecha adquisici√≥n</th>
                            <th>Fecha asignaci√≥n</th><th>Fecha firma resguardo</th>
                            <th>Sal. m√≠n. UMA</th><th>Tipo propiedad</th>
                            <th>Forma adquisici√≥n</th><th>Tipo documento</th>
                            <th>Caracter√≠sticas</th><th>Material</th><th>Color</th>
                            <th>Tipo asignaci√≥n</th><th>Placas</th>
                            <th>Activo gen√©rico</th><th>Grupo activo</th>
                            <th>Activo espec√≠fico</th><th>Acciones</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="i : ${inventarios}">
                            <td th:text="${i.inventario}"></td>
                            <td th:text="${i.nic}"></td>
                            <td th:text="${i.descripcionBien}"></td>
                            <td th:text="${i.valor}"></td>
                            <td th:text="${i.marca}"></td>
                            <td th:text="${i.modelo}"></td>
                            <td th:text="${i.serie}"></td>
                            <td th:text="${i.claveDependencia}"></td>
                            <td th:text="${i.nombreDependencia}"></td>
                            <td th:text="${i.resguardatario}"></td>
                            <td th:text="${i.nombreInmueble}"></td>
                            <td th:text="${i.proveedor}"></td>
                            <td th:text="${i.estadoUso}"></td>
                            <td th:text="${i.fechaAdquisicion != null ? #temporals.format(i.fechaAdquisicion,'dd/MM/yyyy') : ''}"></td>
                            <td th:text="${i.fechaAsignacion != null ? #temporals.format(i.fechaAsignacion,'dd/MM/yyyy') : ''}"></td>
                            <td th:text="${i.fechaFirmaResg != null ? #temporals.format(i.fechaFirmaResg,'dd/MM/yyyy') : ''}"></td>
                            <td th:text="${i.salMinUma}"></td>
                            <td th:text="${i.tipoPropiedad}"></td>
                            <td th:text="${i.formaAdquisicion}"></td>
                            <td th:text="${i.tipoDocumento}"></td>
                            <td th:text="${i.caracteristicas}"></td>
                            <td th:text="${i.material}"></td>
                            <td th:text="${i.color}"></td>
                            <td th:text="${i.tipoAsignacion}"></td>
                            <td th:text="${i.placas}"></td>
                            <td th:text="${i.activoGenerico}"></td>
                            <td th:text="${i.grupoActivo}"></td>
                            <td th:text="${i.activoEspecifico}"></td>
                            <td>
                                <button th:data-id="${i.inventario}" data-categoria="inventarios"
                                        onclick="abrirModalEditar(this)">‚úèÔ∏è</button>
                                <button type="button"
                                        th:data-id="${i.idInventario}"
                                        data-categoria="inventarios"
                                        onclick="eliminarRegistro(this)">
                                    üóëÔ∏è
                                </button>


                            </td>
                        </tr>
                        </tbody>
                    </table>

                </div>

                <!-- ================= PAGINACI√ìN ================= -->
                <div class="paginacion" th:if="${totalPages > 1}">

                    <!-- ANTERIOR -->
                    <a class="nav"
                       th:if="${currentPage > 0}"
                       th:href="@{/admin/gestion-servicios(
           categoria=${categoria},
           tipo=${tipo},
           q=${q},
           page=${currentPage - 1}
       )}">
                        ‚Äπ
                    </a>

                    <!-- N√öMEROS (SOLO 3 DIN√ÅMICOS) -->
                    <span th:each="i : ${#numbers.sequence(
            T(java.lang.Math).max(0, currentPage - 1),
            T(java.lang.Math).min(totalPages - 1, currentPage + 1)
        )}">
        <a th:href="@{/admin/gestion-servicios(
                categoria=${categoria},
                tipo=${tipo},
                q=${q},
                page=${i}
            )}"
           th:text="${i + 1}"
           th:classappend="${i == currentPage} ? 'active' : ''">
        </a>
    </span>

                    <!-- SIGUIENTE -->
                    <a class="nav"
                       th:if="${currentPage < totalPages - 1}"
                       th:href="@{/admin/gestion-servicios(
           categoria=${categoria},
           tipo=${tipo},
           q=${q},
           page=${currentPage + 1}
       )}">
                        ‚Ä∫
                    </a>

                </div>


            </div>
        </div>
    </section>
</main>

<!-- ===== MODAL ===== -->
<div id="modalCrud" class="modal hidden">
    <div class="modal-content">
        <h3 id="modalTitulo"></h3>

        <form method="post" action="/admin/guardar" id="formCrud">

            <!-- ================= PASO 1 (SOLO RESGUARDOS) ================= -->
            <div id="selectorResguardo" style="display:none; margin-bottom:15px;">
                <label>Tipo de resguardo</label>
                <select name="tipoEquipo"
                        id="tipoResguardo"
                        onchange="mostrarCamposResguardo(this.value)">

                <option value="">-- Selecciona --</option>
                    <option value="ESCRITORIO_BASICO">Escritorio b√°sico</option>
                    <option value="MOVIL_AVANZADO">M√≥vil avanzado</option>
                    <option value="ESCRITORIO_AVANZADO">Escritorio avanzado</option>
                    <option value="MOVIL_MEDIO">M√≥vil medio</option>
                    <option value="PORTATIL_DONADO">Port√°til donado</option>
                </select>
            </div>

            <!-- ‚ö†Ô∏è Estos se controlan por JS -->
            <input type="hidden" name="categoria" id="categoria">
            <input type="hidden" name="id" id="registroId">

            <!-- ================= CAMPOS DIN√ÅMICOS ================= -->
            <div id="camposFormulario"></div>

            <button type="submit">Guardar</button>
            <button type="button" onclick="cerrarModal()">Cancelar</button>
        </form>
    </div>
</div>



<script>
    function abrirModalAgregar(btn){
     const c = btn.dataset.categoria;
     const form = document.querySelector('#modalCrud form');

     document.getElementById('modalTitulo').innerText = 'Agregar';
     document.getElementById('categoria').value = c;
     document.getElementById('registroId').value = '';
     document.getElementById('registroId').disabled = true;

     const selector = document.getElementById('selectorResguardo');
     const tipoSel  = document.getElementById('tipoResguardo');


     if (c === 'resguardos') {
        // üî• SOLO RESGUARDOS
        selector.style.display = 'block';
        tipoSel.required = true;

        form.action = '/admin/resguardos/agregar';
        document.getElementById('camposFormulario').innerHTML = '';
    } else {
        // üîÅ TODAS LAS DEM√ÅS
        selector.style.display = 'none';
        tipoSel.required = false;
        tipoSel.value = '';

        form.action = '/admin/guardar';
        cargarCampos(c,{});
    }

    document.getElementById('modalCrud').classList.remove('hidden');
}


     function abrirModalEditar(btn){
         const id = btn.dataset.id;
         const c  = btn.dataset.categoria;

         fetch(`/admin/obtener/${c}/${encodeURIComponent(id)}`)
             .then(r=>r.json())
             .then(d=>{
                 document.getElementById('modalTitulo').innerText='Editar';
                 document.getElementById('categoria').value=c;

                 const idInput = document.getElementById('registroId');
                 idInput.disabled = false;
                 idInput.value = id;

                 const form = document.querySelector('#modalCrud form');
                 form.action = '/admin/guardar';

                document.getElementById('selectorResguardo').style.display = 'none';
                cargarCampos(c,d);

                document.getElementById('modalCrud').classList.remove('hidden');
             });
     }

     function eliminarRegistro(btn){
         if(!confirm('¬øEliminar registro?')) return;

         fetch('/admin/eliminar',{
             method:'POST',
             headers:{'Content-Type':'application/x-www-form-urlencoded'},
             body:`categoria=${btn.dataset.categoria}&id=${encodeURIComponent(btn.dataset.id)}`
         }).then(()=>location.reload());
     }

     function cerrarModal(){
         document.getElementById('modalCrud').classList.add('hidden');
     }

     function cargarCampos(c,d){
         let h='';
         if (c === 'correos') {
     h = `
         <input type="text"
                name="usuario"
                placeholder="Usuario"
                value="${d.usuario || ''}"
                required>

         <input type="email"
                name="correo"
                placeholder="Correo institucional"
                value="${d.correo || ''}"
                required>

         <input type="text"
                name="tipoLicencia"
                placeholder="Tipo de licencia"
                value="${d.tipoLicencia || ''}">

         <input type="text"
                name="area"
                placeholder="√Årea"
                value="${d.area || ''}">
     `;
 }
        if (c === 'licencias') {
     h = `
         <input type="text"
                name="usuario"
                placeholder="Usuario"
                value="${d.usuario || ''}"
                required>

         <input type="text"
                name="area"
                placeholder="√Årea"
                value="${d.area || ''}"
                required>

         <input type="number"
                name="totalLicencias"
                placeholder="Total de licencias"
                value="${d.totalLicencias || ''}"
                min="0"
                required>
     `;
 }

  if (c === 'extenciones') {
     h = `
         <input type="number"
                name="extension"
                placeholder="Extensi√≥n"
                value="${d.id || ''}"
                ${d.id ? 'readonly' : 'required'}>

         <input type="text"
                name="nombre"
                placeholder="Nombre"
                value="${d.nombre || ''}"
                required>

         <input type="text"
                name="departamento"
                placeholder="Departamento"
                value="${d.departamento || ''}">

         <input type="email"
                name="correo"
                placeholder="Correo"
                value="${d.correo || ''}">
     `;
 }
        if(c === 'inventarios'){
     h = `
     <label>Inventario</label>
     <input name="inventario" value="${d.inventario||''}" readonly>

     <label>NIC</label>
     <input name="nic" value="${d.nic||''}">

     <label>Descripci√≥n</label>
     <input name="descripcionBien" value="${d.descripcionBien||''}">

     <label>Valor</label>
     <input name="valor" value="${d.valor||''}">

     <label>Marca</label>
     <input name="marca" value="${d.marca||''}">

     <label>Modelo</label>
     <input name="modelo" value="${d.modelo||''}">

     <label>Serie</label>
     <input name="serie" value="${d.serie||''}">

     <label>Clave dependencia</label>
     <input name="claveDependencia" value="${d.claveDependencia||''}">

     <label>Dependencia</label>
     <input name="nombreDependencia" value="${d.nombreDependencia||''}">

     <label>Resguardatario</label>
     <input name="resguardatario" value="${d.resguardatario||''}">

     <label>Inmueble</label>
     <input name="nombreInmueble" value="${d.nombreInmueble||''}">

     <label>Proveedor</label>
     <input name="proveedor" value="${d.proveedor||''}">

     <label>Estado de uso</label>
     <input name="estadoUso" value="${d.estadoUso||''}">

     <label>Fecha adquisici√≥n</label>
     <input type="date" name="fechaAdquisicion" value="${d.fechaAdquisicion||''}">

     <label>Fecha asignaci√≥n</label>
     <input type="date" name="fechaAsignacion" value="${d.fechaAsignacion||''}">

     <label>Fecha firma resguardo</label>
     <input type="date" name="fechaFirmaResg" value="${d.fechaFirmaResg||''}">

     <label>Salario m√≠nimo UMA</label>
     <input name="salMinUma" value="${d.salMinUma||''}">

     <label>Tipo propiedad</label>
     <input name="tipoPropiedad" value="${d.tipoPropiedad||''}">

     <label>Forma adquisici√≥n</label>
     <input name="formaAdquisicion" value="${d.formaAdquisicion||''}">

     <label>Tipo documento</label>
     <input name="tipoDocumento" value="${d.tipoDocumento||''}">

     <label>Caracter√≠sticas</label>
     <input name="caracteristicas" value="${d.caracteristicas||''}">

     <label>Material</label>
     <input name="material" value="${d.material||''}">

     <label>Color</label>
     <input name="color" value="${d.color||''}">

     <label>Tipo asignaci√≥n</label>
     <input name="tipoAsignacion" value="${d.tipoAsignacion||''}">

     <label>Placas</label>
     <input name="placas" value="${d.placas||''}">

     <label>Activo gen√©rico</label>
     <input name="activoGenerico" value="${d.activoGenerico||''}">

     <label>Grupo activo</label>
     <input name="grupoActivo" value="${d.grupoActivo||''}">

     <label>Activo espec√≠fico</label>
     <input name="activoEspecifico" value="${d.activoEspecifico||''}">
     `;
 }
         document.getElementById('camposFormulario').innerHTML=h;
     }

/* =====================================================
   RESGUARDOS ‚Äì PASO 1: MOSTRAR SELECTOR
===================================================== */
function mostrarSelectorTipoResguardo(){
    document.getElementById('selectorResguardo').style.display = 'block';
    document.getElementById('camposFormulario').innerHTML = '';
}

/* =====================================================
   RESGUARDOS ‚Äì PASO 2: CAMPOS SEG√öN TIPO
===================================================== */
function mostrarCamposResguardo(tipo){

    let h = `
        <input type="hidden" name="tipoEquipo" value="${tipo}">

        <input name="no" placeholder="No. de resguardo" required>
        <input name="usuario" placeholder="Usuario" required>
        <input name="direccion" placeholder="Direcci√≥n">
        <input name="area" placeholder="√Årea / Subdirecci√≥n">
        <input name="perfilEquipo" placeholder="Perfil del equipo">
        <input name="modelo" placeholder="Modelo">
        <input name="serieCpu" placeholder="Serie CPU">
        <input name="status" placeholder="Status">
        <input name="observaciones" placeholder="Observaciones">
    `;

    // üëâ SOLO ALGUNOS TIENEN USUARIO_FINAL
    if (
        tipo === 'MOVIL_AVANZADO' ||
        tipo === 'ESCRITORIO_AVANZADO'
    ) {
        h += `
            <input name="usuarioFinal" placeholder="Usuario final">
        `;
    }

    // üëâ SOLO ESCRITORIOS TIENEN MONITOR / UPS
    if (
        tipo === 'ESCRITORIO_BASICO' ||
        tipo === 'ESCRITORIO_AVANZADO'
    ) {
        h += `
            <input name="modeloMonitor" placeholder="Modelo monitor">
            <input name="serieMonitor" placeholder="Serie monitor">
            <input name="serieUps" placeholder="Serie UPS">
            <input name="serieTeclado" placeholder="Serie teclado">
            <input name="serieMouse" placeholder="Serie mouse">
        `;
    }

    document.getElementById('camposFormulario').innerHTML = h;
}

/* =====================================================
   RESGUARDOS ‚Äì EDITAR
===================================================== */
function abrirModalResguardo(btn){
    const form = document.querySelector('#modalCrud form');

    document.getElementById('modalTitulo').innerText = 'Editar Resguardo';
    form.action = '/admin/resguardos/actualizar';

    document.getElementById('categoria').value = '';

    const idInput = document.getElementById('registroId');
    idInput.disabled = false;
    idInput.value = btn.dataset.id;

    document.getElementById('selectorResguardo').style.display = 'none';

    document.getElementById('camposFormulario').innerHTML = `
        <input type="hidden" name="tipoEquipo" value="${btn.dataset.tipo}">
        <input type="hidden" name="id" value="${btn.dataset.id}">

        <input name="usuario" placeholder="Usuario" value="${btn.dataset.usuario||''}">
        <input name="usuarioFinal" placeholder="Usuario final" value="${btn.dataset.usuariofinal||''}">
        <input name="area" placeholder="√Årea" value="${btn.dataset.area||''}">
        <input name="status" placeholder="Status" value="${btn.dataset.status||''}">
        <input name="observaciones" placeholder="Observaciones" value="${btn.dataset.obs||''}">
    `;

    document.getElementById('modalCrud').classList.remove('hidden');
}

/* =====================================================
   RESGUARDOS ‚Äì LIBERAR
===================================================== */
function liberarResguardo(btn){
    if(!confirm('¬øLiberar este resguardo?')) return;

    fetch('/admin/resguardos/liberar', {
        method: 'POST',
        headers: {'Content-Type':'application/x-www-form-urlencoded'},
        body: `tipoEquipo=${encodeURIComponent(btn.dataset.tipo)}&id=${encodeURIComponent(btn.dataset.id)}`
    }).then(() => location.reload());
}
</script>
<footer class="app-footer">
    <div class="footer-inner">
        ¬©2025/6 - Subdirecci√≥n de Desarrollo Tecnol√≥gico
    </div>
</footer>

</body>
</html>
